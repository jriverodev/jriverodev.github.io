<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Inventario - Equipos Tecnol√≥gicos</title>
    <link rel="stylesheet" href="styles/style.css">
    <!-- Librer√≠a para manejar archivos Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä Inventario de Equipos Tecnol√≥gicos</h1>
            <div class="controls">
                <input type="text" id="searchInput" placeholder="üîç Buscar por trabajador, serial, departamento...">
                <button id="addNewBtn">‚ûï Agregar Equipo</button>
                <button id="exportBtn">üì• Exportar Excel</button>
                <button id="clearLocalBtn">üßπ Limpiar Cach√©</button>
                <button id="refreshBtn">üîÑ Actualizar</button>
            </div>
        </header>

        <div class="stats">
            <div class="stat-card">
                <h3>Total de Equipos</h3>
                <span id="totalCount">0</span>
            </div>
            <div class="stat-card">
                <h3>Operativos</h3>
                <span id="operativoCount">0</span>
            </div>
            <div class="stat-card">
                <h3>Inoperativos</h3>
                <span id="inoperativoCount">0</span>
            </div>
        </div>

        <div class="filters">
            <select id="deptoFilter">
                <option value="">Todos los sectores</option>
                <option value="SIGAL">SIGAL</option>
                <option value="SALA DE OPERACIONES">SALA DE OPERACIONES</option>
                <option value="TLA">TLA</option>
                <option value="MTTO">MTTO</option>
                <option value="CONTRATACION">CONTRATACION</option>
                <option value="SALA DE MTTO">SALA DE MTTO</option>
            </select>
            <select id="statusFilter">
                <option value="">Todos los Status</option>
                <option value="OPERATIVO">OPERATIVO</option>
                <option value="INOPERATIVO">INOPERATIVO</option>
            </select>
        </div>

        <div class="table-container">
            <table class="inventory-table">
                <thead>
                    <tr>
                        <th>N¬∞</th>
                        <th>DESCRIPCION</th>
                        <th>MARCA</th>
                        <th>MODELO</th>
                        <th>SERIAL</th>
                        <th>ETIQUETA</th>
                        <th>SECTOR</th>
                        <th>STATUS</th>
                        <th>CUSTODIO RESPONSABLE</th>
                        <th>CEDULA</th>
                        <th>CARGO</th>
                        <th>OBSERVACIONES</th>
                        <th>ACCIONES</th>
                    </tr>
                </thead>
                <tbody id="inventoryTableBody">
                    <!-- Filas cargadas por JavaScript -->
                </tbody>
            </table>
        </div>
        
        <!-- MODAL AGREGAR EQUIPO -->
        <div id="addModal" class="modal modal-add">
            <div class="modal-content">
                <h2>‚ûï Agregar Nuevo Equipo</h2>
                <form id="addModalForm">
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label for="addDescripcion">Descripci√≥n</label>
                            <input type="text" id="addDescripcion" placeholder="Laptop, Monitor, Tel√©fono IP...">
                        </div>
                        <div class="form-group">
                            <label for="addMarca">Marca</label>
                            <input type="text" id="addMarca" placeholder="DELL, HP, Cisco">
                        </div>
                        <div class="form-group">
                            <label for="addModelo">Modelo</label>
                            <input type="text" id="addModelo" placeholder="Latitude 5420, P2419H">
                        </div>
                        <div class="form-group">
                            <label for="addSerial">Serial</label>
                            <input type="text" id="addSerial" placeholder="N√∫mero de serie del equipo">
                        </div>
                        <div class="form-group">
                            <label for="addEtiqueta">Etiqueta</label>
                            <input type="text" id="addEtiqueta" placeholder="N¬∞ de Etiqueta (si aplica)">
                        </div>
                        <div class="form-group">
                            <label for="addSECTOR">Sector</label>
                            <select id="addSECTOR">
                                <option value="">Seleccione</option>
                                <option value="SIGAL">SIGAL</option>
                                <option value="SALA DE OPERACIONES">SALA DE OPERACIONES</option>
                                <option value="TLA">TLA</option>
                                <option value="MTTO">MTTO</option>
                                <option value="CONTRATACION">CONTRATACION</option>
                                <option value="SALA DE MTTO">SALA DE MTTO</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="addSTATUS">Status</label>
                            <select id="addSTATUS">
                                <option value="">Seleccione</option>
                                <option value="OPERATIVO">OPERATIVO</option>
                                <option value="INOPERATIVO">INOPERATIVO</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="addResponsable">Custodio Responsable</label>
                            <input type="text" id="addResponsable" placeholder="Nombre completo del custodio">
                        </div>
                        <div class="form-group">
                            <label for="addCedula">C√©dula</label>
                            <input type="text" id="addCedula" placeholder="C√©dula">
                        </div>
                        <div class="form-group">
                            <label for="addCargo">Cargo</label>
                            <input type="text" id="addCargo" placeholder="Cargo">
                        </div>
                        <div class="form-group full-width">
                            <label for="addObservaciones">Observaciones</label>
                            <textarea id="addObservaciones" placeholder="Detalles o notas importantes" rows="3"></textarea>
                        </div>
                    </div>
                    <div class="modal-buttons">
                        <button type="button" class="btn-cancel" onclick="app.closeAddModal()">‚ùå Cancelar</button>
                        <!-- Usamos type="submit" para que la app.js capture el evento -->
                        <button type="submit" class="btn-save">üíæ Agregar Equipo</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- MODAL EDITAR EQUIPO -->
        <div id="editModal" class="modal modal-edit">
            <div class="modal-content">
                <h2>‚úèÔ∏è Editar Equipo N¬∞: <span id="editRowNumber"></span></h2>
                <form id="editModalForm" data-row-index="">
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label for="editDescripcion">Descripci√≥n</label>
                            <input type="text" id="editDescripcion" required>
                        </div>
                        <div class="form-group">
                            <label for="editMarca">Marca</label>
                            <input type="text" id="editMarca">
                        </div>
                        <div class="form-group">
                            <label for="editModelo">Modelo</label>
                            <input type="text" id="editModelo">
                        </div>
                        <div class="form-group">
                            <label for="editSerial">Serial</label>
                            <input type="text" id="editSerial">
                        </div>
                        <div class="form-group">
                            <label for="editEtiqueta">Etiqueta</label>
                            <input type="text" id="editEtiqueta">
                        </div>
                        <div class="form-group">
                            <label for="editSECTOR">Sector</label>
                            <select id="editSECTOR">
                                <option value="">Seleccione</option>
                                <option value="SIGAL">SIGAL</option>
                                <option value="SALA DE OPERACIONES">SALA DE OPERACIONES</option>
                                <option value="TLA">TLA</option>
                                <option value="MTTO">MTTO</option>
                                <option value="CONTRATACION">CONTRATACION</option>
                                <option value="SALA DE MTTO">SALA DE MTTO</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editSTATUS">Status</label>
                            <select id="editSTATUS">
                                <option value="">Seleccione</option>
                                <option value="OPERATIVO">OPERATIVO</option>
                                <option value="INOPERATIVO">INOPERATIVO</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editResponsable">Custodio Responsable</label>
                            <input type="text" id="editResponsable">
                        </div>
                        <div class="form-group">
                            <label for="editCedula">C√©dula</label>
                            <input type="text" id="editCedula">
                        </div>
                        <div class="form-group">
                            <label for="editCargo">Cargo</label>
                            <input type="text" id="editCargo">
                        </div>
                        <div class="form-group full-width">
                            <label for="editObservaciones">Observaciones</label>
                            <textarea id="editObservaciones" rows="3"></textarea>
                        </div>
                    </div>
                    <div class="modal-buttons">
                        <button type="button" class="btn-cancel" onclick="app.closeEditModal()">‚ùå Cancelar</button>
                        <!-- Usamos type="submit" para que la app.js capture el evento -->
                        <button type="submit" class="btn-save">üíæ Guardar Cambios</button>
                    </div>
                </form>
            </div>
        </div>


        <footer>
            <p>Sistema de Inventario - Desarrollado para gesti√≥n de equipos tecnol√≥gicos</p>
        </footer>
    </div>

    <!-- Carga de scripts -->
    <script src="js/google-sheets.js"></script>
    <script src="js/export.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
